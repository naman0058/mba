{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createObservable = void 0;\n\nconst rxjs_1 = require(\"rxjs\");\n\nconst axios_1 = __importDefault(require(\"axios\"));\n\nfunction createObservable(promiseFactory) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  let config = args[args.length - 1];\n  config = config ? Object.assign({}, config) : {};\n  args[args.length - 1] = config;\n  let cancelSource;\n  const hasCancelToken = !!config.cancelToken;\n\n  if (hasCancelToken) {\n    console.warn(`No need to use cancel token, just unsubscribe the subscription would cancel the http request automatically`);\n  }\n\n  const observable = new rxjs_1.Observable(subscriber => {\n    if (!hasCancelToken) {\n      cancelSource = axios_1.default.CancelToken.source();\n      config.cancelToken = cancelSource.token;\n    }\n\n    promiseFactory(...args).then(response => {\n      subscriber.next(response);\n      subscriber.complete();\n    }).catch(error => subscriber.error(error));\n  });\n\n  const _subscribe = observable.subscribe.bind(observable);\n\n  observable.subscribe = function () {\n    const subscription = _subscribe(...arguments);\n\n    const _unsubscribe = subscription.unsubscribe.bind(subscription);\n\n    subscription.unsubscribe = () => {\n      if (cancelSource) {\n        cancelSource.cancel();\n      }\n\n      _unsubscribe();\n    };\n\n    return subscription;\n  };\n\n  return observable;\n}\n\nexports.createObservable = createObservable;","map":{"version":3,"sources":["D:/naman-cloud9/naman-cloud9/node_modules/axios-observable/dist/create-observable.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","createObservable","rxjs_1","require","axios_1","promiseFactory","args","config","length","assign","cancelSource","hasCancelToken","cancelToken","console","warn","observable","Observable","subscriber","default","CancelToken","source","token","then","response","next","complete","catch","error","_subscribe","subscribe","bind","subscription","_unsubscribe","unsubscribe","cancel"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,gBAAR,GAA2B,KAAK,CAAhC;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,MAAD,CAAtB;;AACA,MAAMC,OAAO,GAAGV,eAAe,CAACS,OAAO,CAAC,OAAD,CAAR,CAA/B;;AACA,SAASF,gBAAT,CAA0BI,cAA1B,EAAmD;AAAA,oCAANC,IAAM;AAANA,IAAAA,IAAM;AAAA;;AAC/C,MAAIC,MAAM,GAAGD,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAAjB;AACAD,EAAAA,MAAM,GAAGA,MAAM,GAAGV,MAAM,CAACY,MAAP,CAAc,EAAd,EAAkBF,MAAlB,CAAH,GAA+B,EAA9C;AACAD,EAAAA,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAAJ,GAAwBD,MAAxB;AACA,MAAIG,YAAJ;AACA,QAAMC,cAAc,GAAG,CAAC,CAACJ,MAAM,CAACK,WAAhC;;AACA,MAAID,cAAJ,EAAoB;AAChBE,IAAAA,OAAO,CAACC,IAAR,CAAc,4GAAd;AACH;;AACD,QAAMC,UAAU,GAAG,IAAIb,MAAM,CAACc,UAAX,CAAuBC,UAAD,IAAgB;AACrD,QAAI,CAACN,cAAL,EAAqB;AACjBD,MAAAA,YAAY,GAAGN,OAAO,CAACc,OAAR,CAAgBC,WAAhB,CAA4BC,MAA5B,EAAf;AACAb,MAAAA,MAAM,CAACK,WAAP,GAAqBF,YAAY,CAACW,KAAlC;AACH;;AACDhB,IAAAA,cAAc,CAAC,GAAGC,IAAJ,CAAd,CAAwBgB,IAAxB,CAA6BC,QAAQ,IAAI;AACrCN,MAAAA,UAAU,CAACO,IAAX,CAAgBD,QAAhB;AACAN,MAAAA,UAAU,CAACQ,QAAX;AACH,KAHD,EAIKC,KAJL,CAIWC,KAAK,IAAIV,UAAU,CAACU,KAAX,CAAiBA,KAAjB,CAJpB;AAKH,GAVkB,CAAnB;;AAWA,QAAMC,UAAU,GAAGb,UAAU,CAACc,SAAX,CAAqBC,IAArB,CAA0Bf,UAA1B,CAAnB;;AACAA,EAAAA,UAAU,CAACc,SAAX,GAAuB,YAAc;AACjC,UAAME,YAAY,GAAGH,UAAU,CAAC,YAAD,CAA/B;;AACA,UAAMI,YAAY,GAAGD,YAAY,CAACE,WAAb,CAAyBH,IAAzB,CAA8BC,YAA9B,CAArB;;AACAA,IAAAA,YAAY,CAACE,WAAb,GAA2B,MAAM;AAC7B,UAAIvB,YAAJ,EAAkB;AACdA,QAAAA,YAAY,CAACwB,MAAb;AACH;;AACDF,MAAAA,YAAY;AACf,KALD;;AAMA,WAAOD,YAAP;AACH,GAVD;;AAWA,SAAOhB,UAAP;AACH;;AACDhB,OAAO,CAACE,gBAAR,GAA2BA,gBAA3B","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createObservable = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst axios_1 = __importDefault(require(\"axios\"));\nfunction createObservable(promiseFactory, ...args) {\n    let config = args[args.length - 1];\n    config = config ? Object.assign({}, config) : {};\n    args[args.length - 1] = config;\n    let cancelSource;\n    const hasCancelToken = !!config.cancelToken;\n    if (hasCancelToken) {\n        console.warn(`No need to use cancel token, just unsubscribe the subscription would cancel the http request automatically`);\n    }\n    const observable = new rxjs_1.Observable((subscriber) => {\n        if (!hasCancelToken) {\n            cancelSource = axios_1.default.CancelToken.source();\n            config.cancelToken = cancelSource.token;\n        }\n        promiseFactory(...args).then(response => {\n            subscriber.next(response);\n            subscriber.complete();\n        })\n            .catch(error => subscriber.error(error));\n    });\n    const _subscribe = observable.subscribe.bind(observable);\n    observable.subscribe = (...args2) => {\n        const subscription = _subscribe(...args2);\n        const _unsubscribe = subscription.unsubscribe.bind(subscription);\n        subscription.unsubscribe = () => {\n            if (cancelSource) {\n                cancelSource.cancel();\n            }\n            _unsubscribe();\n        };\n        return subscription;\n    };\n    return observable;\n}\nexports.createObservable = createObservable;\n"]},"metadata":{},"sourceType":"script"}